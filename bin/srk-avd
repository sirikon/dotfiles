#!/usr/bin/env abs

EMULATOR_BIN="~/Android/Sdk/emulator/emulator"

f main() {
    avds = getAvds().map(f(avd){'"$avd"'}).join(' ')
    avd = `
    zenity --list \
        --title="AVD Picker" \
        --text="Pick an AVD to start" \
        --column="Name" $avds
    `
    if avd.ok {
        `$EMULATOR_BIN -avd "$avd"`
    }
}

f getAvds() {
    return `$EMULATOR_BIN -list-avds`.lines()
}

main()
