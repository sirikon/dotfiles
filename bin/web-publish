#!/usr/bin/env bash
set -euo pipefail

function main {
    folder="$(pwd)"
    domain="$1"
    printf "%s\n" "Publishing:"
    printf "%s\n" " folder: ${folder}"
    printf "%s\n" " to domain: ${domain}"
    printf "%s\n" ""

    ssh "root@${domain}" "rm -rf /srv/web/${domain}/*"
    scp -r "${folder}"/* "root@${domain}:/srv/web/${domain}/"
}

main "$@"
