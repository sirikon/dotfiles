#!/usr/bin/env bash

set -e

function stripe-card-text-provider {
    text="$(__pick-stripe-card)"
    sleep 0.2
    echo "${text// /}"
}

function __pick-stripe-card {
    zenity --list \
        --title="Stripe Card Picker" \
        --width="500" \
        --height="400" \
        --text="Pick a credit card" \
        --column="Number" --column="Type" --column="Registrable" --column="Chargeable" \
        \
        "4242 4242 4242 4242"   "Visa"                  ✔️ ✔️ \
        "4000 0566 5566 5556"   "Visa (debit)"          ✔️ ✔️ \
        "5555 5555 5555 4444"   "Mastercard"            ✔️ ✔️ \
        "2223 0031 2200 3222"   "Mastercard (2-series)" ✔️ ✔️ \
        "5200 8282 8282 8210"   "Mastercard (debit)"    ✔️ ✔️ \
        "5105 1051 0510 5100"   "Mastercard (prepaid)"  ✔️ ✔️ \
        "3782 822463 10005"     "American Express"      ✔️ ✔️ \
        "3714 496353 98431"     "American Express"      ✔️ ✔️ \
        "4000 0000 0000 0341"   "Visa"                  ✔️ ❌ \
        "4111 1111 1111 1111"   "Visa"                  ✔️ ✔️
}

text="$("${1}-text-provider")"
xdotool type --delay 100 "$text"
